<div class="relative">
  <button
    class="flex items-center gap-2 bg-slate-200 hover:bg-slate-300 px-4 py-2 rounded w-full"
    (click)="open.set(!open())"
  >
    <div class="relative size-5 shrink-0"><img ngSrc="assets/icon/filters.svg" alt="Create" fill /></div>
  </button>

  <form
    [formGroup]="form"
    class="bg-white absolute shadow min-w-full p-4 right-0 overflow-clip z-20 *:mb-2 md:min-w-64 flex flex-col gap-2"
    [ngClass]="{ hidden: !open() }"
  >
    <!-- Título y Separador -->
    <div>
      <h3 class="font-semibold text-lg text-gray-800">Descargar Reporte</h3>
      <hr class="border-gray-300 mt-2" />
    </div>
    <div class="flex flex-col gap-4">
      <div class="flex flex-col">
        <label class="text-sm font-medium text-gray-600 mb-1">Fecha inicio</label>
        <div class="relative">
          <input
            name="start"
            type="date"
            formControlName="start"
            [attr.max]="minDate()"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 w-full pl-4 py-2"
          />
        </div>
      </div>

      <div class="flex flex-col">
        <label class="text-sm font-medium text-gray-600 mb-1">Fecha fin</label>
        <div class="relative">
          <input
            name="end"
            type="date"
            formControlName="end"
            [attr.max]="maxDate()"
            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-md focus:ring-blue-500 focus:border-blue-500 w-full pl-4 py-2"
          />
        </div>
      </div>
    </div>
    <!-- Botón de búsqueda -->
    @if (!loading()) {
      <div>
        <button class="w-full px-2 py-1 bg-primary text-white rounded-md mb-1" (click)="submit()">Descargar</button>
      </div>
    } @else {
      <div class="flex justify-center items-center h-full mt-4">
        <div class="loader"></div>
      </div>
    }
  </form>
</div>
