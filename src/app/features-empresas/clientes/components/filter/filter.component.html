<div class="relative">
  <button
    class="flex items-center gap-2 bg-slate-200 hover:bg-slate-300 px-4 py-2 rounded w-full md:w-auto"
    (click)="open.set(!open())"
  >
    Reportes
  </button>

  <div
    class="bg-white absolute shadow min-w-full p-4 mt-2 right-0 overflow-clip z-20 md:min-w-64 flex flex-col gap-2"
    [ngClass]="{ hidden: !open() }"
  >
    <div>
      <h3 class="font-semibold text-lg text-gray-800">Descargar Reportes</h3>
      <hr class="border-gray-300 mt-2" />
    </div>

    <div>
      <label class="flex items-center justify-start">
        <input type="radio" name="estadoCredito" value="ATRASADO" class="mr-2" [(ngModel)]="selectedEstado" />
        Crédito Atrasado
      </label>

      <label class="flex items-center justify-start">
        <input type="radio" name="estadoCredito" value="PENDIENTE" class="mr-2" [(ngModel)]="selectedEstado" />
        Crédito Pendiente
      </label>

      <label class="flex items-center justify-start">
        <input type="radio" name="estadoCredito" value="PAGADO" class="mr-2" [(ngModel)]="selectedEstado" />
        Crédito Pagado
      </label>

      <label class="flex items-center justify-start">
        <input type="radio" name="estadoCredito" value="TODOS" class="mr-2" [(ngModel)]="selectedEstado" />
        Todos
      </label>
    </div>

    <!-- Botón de búsqueda -->
    <div>
      @if (!loading()) {
        <button class="w-full px-2 py-1 bg-primary text-white rounded-md mb-1" (click)="submit()">Descargar</button>
      } @else {
        <button class="w-full px-2 py-1 bg-primary text-white rounded-md mb-1" disabled>Descargando...</button>
      }
    </div>
  </div>
</div>

@if (isModalOpen()) {
  @defer {
    <app-viewer-document [documentUrl]="currentDocumentUrl()" (close)="closeDocument()" />
  }
}
